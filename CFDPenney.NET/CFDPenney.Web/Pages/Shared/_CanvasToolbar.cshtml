<!-- Desktop Toolbar Sidebar -->
<div id="main-toolbar" class="w-20 annotate-toolbar desktop-only border-r flex flex-col items-center py-5 space-y-3 z-20 shadow-xl shrink-0 h-full overflow-y-auto">
    <!-- Tools -->
    <div class="flex flex-col space-y-2.5 w-full px-2.5" id="tool-container">
        <!-- Generated by JS -->
    </div>

    <div class="w-10 h-px my-3 shrink-0 divider-horizontal"></div>

    <!-- Colors -->
    <div class="flex flex-col space-y-2.5 px-2.5" id="color-container">
        <!-- Generated by JS -->
        <!-- Custom Color Picker Wrapper -->
        <div class="relative group w-8 h-8 mx-auto">
            <div class="w-8 h-8 rounded-full border-2 cursor-pointer border-primary shadow-md transition-all duration-200 hover:scale-110 hover:shadow-lg flex items-center justify-center text-xs" style="background: conic-gradient(red, yellow, lime, cyan, blue, magenta, red);">
                <i data-lucide="plus" class="w-3 h-3 text-white drop-shadow-md"></i>
            </div>
            <input type="color" id="custom-color-picker" class="absolute inset-0 opacity-0 cursor-pointer w-full h-full rounded-full">
        </div>
    </div>

    <div class="w-10 h-px my-3 shrink-0 divider-horizontal"></div>

    <!-- Fill Controls (only visible for fillable tools) -->
    <div id="fill-controls" class="flex flex-col space-y-2.5 px-2.5 hidden">
        <!-- Fill Toggle -->
        <button id="fill-toggle" class="p-3.5 rounded-xl transition-all duration-200 btn-clear hover:scale-105 hover:shadow-md" title="Toggle Fill">
            <i data-lucide="paint-bucket" class="w-5 h-5"></i>
        </button>
        <!-- Fill Color Picker -->
        <div class="relative group w-8 h-8 mx-auto">
            <div class="w-8 h-8 rounded-full border-2 cursor-pointer border-primary shadow-md transition-all duration-200 hover:scale-110 hover:shadow-lg flex items-center justify-center" style="background: conic-gradient(red, yellow, lime, cyan, blue, magenta, red);">
                <i data-lucide="droplet" class="w-3 h-3 text-white drop-shadow-md"></i>
            </div>
            <input type="color" id="fill-color-picker" class="absolute inset-0 opacity-0 cursor-pointer w-full h-full rounded-full">
        </div>
    </div>

    <div class="w-10 h-px my-3 shrink-0 divider-horizontal"></div>

    <!-- Clear Action -->
    <button id="btn-clear" class="p-3.5 rounded-xl transition-all duration-200 btn-clear hover:scale-105 hover:shadow-md" title="Clear All">
        <i data-lucide="trash-2" class="w-5 h-5"></i>
    </button>

    <!-- Stroke Width Slider -->
    <div class="mt-auto mb-5 group relative px-2.5">
        <div class="p-3 rounded-xl cursor-pointer bg-tertiary transition-all duration-200 hover:shadow-md hover:scale-105">
            <div id="stroke-indicator" class="w-5 bg-white rounded-full mx-auto stroke-indicator transition-all duration-200"></div>
        </div>
        <div class="absolute left-full ml-3 bottom-0 p-4 rounded-xl border hidden group-hover:flex flex-col space-y-3 w-36 shadow-2xl z-50 annotate-controls backdrop-blur-sm">
            <span class="text-xs font-semibold text-secondary uppercase tracking-wide">Stroke Width</span>
            <input type="range" id="stroke-slider" min="2" max="30" value="4" class="w-full accent-indigo-500">
        </div>
    </div>
</div>

<!-- Mobile Toolbar (Bottom Sheet) -->
<div id="mobile-toolbar" class="mobile-only annotate-toolbar" style="display: none;">
    <!-- Mode Switcher (Mobile Only) -->
    <div id="mobile-mode-switcher">
        <button id="mobile-btn-mode-board" class="active">
            <i data-lucide="square"></i>
            <span>Board</span>
        </button>
        <button id="mobile-btn-mode-screen">
            <i data-lucide="monitor"></i>
            <span>Screen</span>
        </button>
    </div>
    
    <!-- Tools -->
    <div id="mobile-tool-container">
        <!-- Generated by JS (same as desktop) -->
    </div>

    <div class="w-full h-px my-3 divider-horizontal"></div>

    <!-- Colors -->
    <div id="mobile-color-container">
        <!-- Generated by JS (same as desktop) -->
    </div>

    <div class="w-full h-px my-3 divider-horizontal"></div>

    <!-- Mobile Actions Row -->
    <div class="flex gap-2 w-full">
        <button id="mobile-btn-undo" class="flex-1 rounded-lg transition-all btn-action flex items-center justify-center gap-1.5" disabled>
            <i data-lucide="undo"></i>
            <span>Undo</span>
        </button>
        <button id="mobile-btn-redo" class="flex-1 rounded-lg transition-all btn-action flex items-center justify-center gap-1.5" disabled>
            <i data-lucide="redo"></i>
            <span>Redo</span>
        </button>
    </div>

    <div class="flex gap-2 w-full mt-2">
        <button id="mobile-btn-snapshot" class="flex-1 rounded-lg transition-all flex items-center justify-center gap-1.5" style="color: white;">
            <i data-lucide="camera"></i>
            <span class="font-medium">Snapshot</span>
        </button>
    </div>

    <div class="w-full h-px my-3 divider-horizontal"></div>

    <!-- Fill Controls (only visible for fillable tools) -->
    <div id="mobile-fill-controls" class="hidden">
        <!-- Filled in by JS if needed -->
    </div>

    <!-- Stroke Width Control -->
    <div class="w-full">
        <label class="text-xs font-semibold text-secondary uppercase tracking-wide block">Stroke</label>
        <div class="flex items-center gap-2.5 mt-1.5">
            <div id="mobile-stroke-indicator" class="bg-white rounded-full stroke-indicator transition-all duration-200"></div>
            <input type="range" id="mobile-stroke-slider" min="2" max="30" value="4" class="flex-1 accent-indigo-500">
        </div>
    </div>

    <div class="w-full h-px my-3 divider-horizontal"></div>

    <!-- Clear Action -->
    <button id="mobile-btn-clear" class="w-full rounded-lg transition-all duration-200 btn-clear flex items-center justify-center gap-1.5" title="Clear All">
        <i data-lucide="trash-2"></i>
        <span class="font-medium">Clear Canvas</span>
    </button>
</div>
